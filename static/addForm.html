<!DOCTYPE html>
<html>
	<head>
		<title>Add a Quote</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" ></script>
		<style>
			.success {
				color: green;
			}
			.failure {
				color: red;
			}
			.hide {
				display: none;
			}
		</style>
	</head>
	<body>
		<form name="addQuote" method="post" id="addQuote" action="/AddSquare">
			Quote: <input name="square" type="text" id="square"></br>
			Password : <input name="password" type="password" id="password"></br>
			<input name="submit" type="button" value="Submit" id="submitButton">
		</form>
		<div id="notification" class="hide"></div>

		<script>

		$('#square').on('input', function(){
			$('#notification').removeClass().addClass('hide');
		});

		$('#password').on('input', function(){
			$('#notification').removeClass().addClass('hide');
		});


		var form = $('#submitButton');
		form.click(function(event){
			event.preventDefault();

			var $form = $( '#addQuote' ),
				sq = $form.find("input[name='square']" ).val(),
				pass = $form.find("input[name='password']" ).val(),
				url = $form.attr( "action" );

			var posting = $.post(url, {square: sq, password: pass}, function(){
				$('#notification').removeClass().addClass('success').text('Success');
				$('#square').val('');
				$('#password').val('');
			})
			posting.fail(function(err) {

				$('#password').val('');
				$('#notification').removeClass().addClass('failure').text('Failure');
				if (err.status == 401) {
					$('#notification').removeClass().addClass('failure').text('Failure: Bad Password');
				}
			});

			return false;

		});
		</script>
	</body>
</html>